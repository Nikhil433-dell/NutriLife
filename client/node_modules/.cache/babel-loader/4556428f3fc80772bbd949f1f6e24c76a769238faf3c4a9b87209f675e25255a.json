{"ast":null,"code":"var _jsxFileName = \"/Users/nikhiljangir/NutriLife/client/src/pages/MapView.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { SHELTERS as FALLBACK_SHELTERS } from '../data/shelters';\nimport { shelterApi } from '../utils/api';\nimport { getMatchScore } from '../utils/helpers';\nimport { getStatusLabel } from '../utils/statusHelpers';\nimport { OccupancyBar, MatchBadge, Tag } from '../components/shared';\nimport { ShelterProfileModal } from '../components/modals';\n\n// Fix for default marker icons in react-leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Fit map bounds to show all markers (only on initial load)\nfunction FitBounds({\n  shelters,\n  skip\n}) {\n  _s();\n  const map = useMap();\n  const hasFitted = useRef(false);\n  useEffect(() => {\n    if (skip || hasFitted.current || shelters.length === 0) return;\n    const bounds = L.latLngBounds(shelters.map(s => [s.lat, s.lng]));\n    map.fitBounds(bounds, {\n      padding: [50, 50]\n    });\n    hasFitted.current = true;\n  }, [map, shelters, skip]);\n  return null;\n}\n\n// Fly map to selected shelter when user clicks a card, marker, or \"View details\"\n_s(FitBounds, \"u2C54stDzTlQAdrTuMjnrCB4ZvY=\", false, function () {\n  return [useMap];\n});\n_c = FitBounds;\nfunction MapFlyTo({\n  selectedShelter\n}) {\n  _s2();\n  const map = useMap();\n  useEffect(() => {\n    if (selectedShelter && selectedShelter.lat != null && selectedShelter.lng != null) {\n      map.flyTo([selectedShelter.lat, selectedShelter.lng], 15, {\n        duration: 0.5\n      });\n    }\n  }, [map, selectedShelter]);\n  return null;\n}\n\n/**\n * MapView ‚Äì interactive shelter map with sidebar list.\n * Uses react-leaflet when available; gracefully falls back to a list-only view.\n *\n * @param {object}      props\n * @param {object|null} props.user\n * @param {object}      props.prefs    - user preferences for match scoring\n * @param {number[]}    props.bookmarks\n * @param {Function}    props.onBookmark\n */\n_s2(MapFlyTo, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c2 = MapFlyTo;\nfunction MapView({\n  user,\n  prefs = {},\n  bookmarks = [],\n  onBookmark\n}) {\n  _s3();\n  const [shelters, setShelters] = useState(FALLBACK_SHELTERS);\n  const [selectedShelter, setSelectedShelter] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterService, setFilterService] = useState('all');\n  const [hasSelectedOnce, setHasSelectedOnce] = useState(false);\n  useEffect(() => {\n    shelterApi.getAll().then(setShelters).catch(() => {});\n  }, []);\n  const ALL_SERVICES = ['all', 'meals', 'beds', 'showers', 'medical', 'counseling', 'childcare'];\n  const filteredShelters = useMemo(() => {\n    return shelters.filter(s => {\n      const matchesSearch = s.name.toLowerCase().includes(searchQuery.toLowerCase()) || s.address.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesFilter = filterService === 'all' || s.services.includes(filterService);\n      return matchesSearch && matchesFilter;\n    }).sort((a, b) => getMatchScore(b, prefs) - getMatchScore(a, prefs));\n  }, [shelters, searchQuery, filterService, prefs]);\n  const handleSelectShelter = shelter => {\n    setSelectedShelter(shelter);\n    setHasSelectedOnce(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: 'calc(100vh - 64px)',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      style: {\n        width: 360,\n        flexShrink: 0,\n        overflowY: 'auto',\n        background: 'var(--color-surface)',\n        borderRight: '1px solid var(--color-border)',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 16,\n          borderBottom: '1px solid var(--color-border)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          type: \"search\",\n          placeholder: \"\\uD83D\\uDD0D Search shelters\\u2026\",\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          style: {\n            marginBottom: 12\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 6,\n            flexWrap: 'wrap'\n          },\n          children: ALL_SERVICES.map(svc => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setFilterService(svc),\n            style: {\n              padding: '4px 10px',\n              borderRadius: 'var(--radius-full)',\n              border: 'none',\n              fontSize: 12,\n              fontWeight: 600,\n              cursor: 'pointer',\n              background: filterService === svc ? 'var(--color-primary)' : 'var(--color-border)',\n              color: filterService === svc ? '#fff' : 'var(--color-text-muted)',\n              transition: 'all var(--transition-fast)'\n            },\n            children: svc === 'all' ? 'All' : svc.charAt(0).toUpperCase() + svc.slice(1)\n          }, svc, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto'\n        },\n        children: filteredShelters.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 32,\n            textAlign: 'center',\n            color: 'var(--color-text-muted)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 40,\n              marginBottom: 8\n            },\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No shelters match your search.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this) : filteredShelters.map(shelter => /*#__PURE__*/_jsxDEV(ShelterCard, {\n          shelter: shelter,\n          prefs: prefs,\n          isBookmarked: bookmarks.includes(shelter.id),\n          onSelect: () => handleSelectShelter(shelter),\n          onBookmark: () => onBookmark === null || onBookmark === void 0 ? void 0 : onBookmark(shelter.id)\n        }, shelter.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: {\n        flex: 1,\n        position: 'relative'\n      },\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: [44.9778, -93.2650] // Minneapolis, MN coordinates\n        ,\n        zoom: 12,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FitBounds, {\n          shelters: filteredShelters,\n          skip: hasSelectedOnce\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapFlyTo, {\n          selectedShelter: selectedShelter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), filteredShelters.map(shelter => /*#__PURE__*/_jsxDEV(Marker, {\n          position: [shelter.lat, shelter.lng],\n          eventHandlers: {\n            click: () => handleSelectShelter(shelter)\n          },\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: 200\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontSize: 14,\n                  fontWeight: 700,\n                  marginBottom: 4\n                },\n                children: shelter.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: 12,\n                  color: '#666',\n                  marginBottom: 8\n                },\n                children: shelter.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8,\n                  marginBottom: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(MatchBadge, {\n                  score: getMatchScore(shelter, prefs)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: 11,\n                    color: '#999'\n                  },\n                  children: [shelter.distance, \" mi away\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(OccupancyBar, {\n                current: shelter.current,\n                capacity: shelter.capacity,\n                showLabel: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 4,\n                  flexWrap: 'wrap',\n                  marginTop: 8\n                },\n                children: [shelter.services.slice(0, 3).map(svc => /*#__PURE__*/_jsxDEV(Tag, {\n                  style: {\n                    fontSize: 10,\n                    padding: '2px 6px'\n                  },\n                  children: svc\n                }, svc, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this)), shelter.services.length > 3 && /*#__PURE__*/_jsxDEV(Tag, {\n                  style: {\n                    fontSize: 10,\n                    padding: '2px 6px'\n                  },\n                  children: [\"+\", shelter.services.length - 3]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleSelectShelter(shelter),\n                style: {\n                  marginTop: 8,\n                  width: '100%',\n                  padding: '6px 12px',\n                  background: 'var(--color-primary)',\n                  color: '#fff',\n                  border: 'none',\n                  borderRadius: 'var(--radius-md)',\n                  fontSize: 12,\n                  fontWeight: 600,\n                  cursor: 'pointer'\n                },\n                children: \"View Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.google.com/maps/dir/?api=1&destination=${shelter.lat},${shelter.lng}`,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                style: {\n                  display: 'block',\n                  marginTop: 6,\n                  fontSize: 12,\n                  color: 'var(--color-primary)',\n                  fontWeight: 600,\n                  textDecoration: 'none'\n                },\n                children: \"\\uD83E\\uDDED Get directions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)\n        }, shelter.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ShelterProfileModal, {\n      shelter: selectedShelter,\n      isOpen: !!selectedShelter,\n      onClose: () => setSelectedShelter(null),\n      prefs: prefs,\n      isBookmarked: selectedShelter ? bookmarks.includes(selectedShelter.id) : false,\n      onBookmark: onBookmark,\n      onGetDirections: s => {\n        const dest = `${s.lat},${s.lng}`;\n        const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(dest)}`;\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(pos => {\n            const origin = `${pos.coords.latitude},${pos.coords.longitude}`;\n            window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(dest)}`, '_blank', 'noopener,noreferrer');\n          }, () => window.open(url, '_blank', 'noopener,noreferrer'));\n        } else {\n          window.open(url, '_blank', 'noopener,noreferrer');\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s3(MapView, \"H/lEFSAio3hjYB+Zx7Wenx8cZjI=\");\n_c3 = MapView;\nfunction ShelterCard({\n  shelter,\n  prefs,\n  isBookmarked,\n  onSelect,\n  onBookmark\n}) {\n  const score = getMatchScore(shelter, prefs);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: onSelect,\n    style: {\n      padding: '16px',\n      borderBottom: '1px solid var(--color-border)',\n      cursor: 'pointer',\n      transition: 'background var(--transition-fast)'\n    },\n    onMouseEnter: e => e.currentTarget.style.background = 'var(--color-bg)',\n    onMouseLeave: e => e.currentTarget.style.background = 'transparent',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        marginBottom: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          minWidth: 0,\n          marginRight: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            fontSize: 14,\n            fontWeight: 700,\n            color: 'var(--color-text)',\n            marginBottom: 2,\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n          },\n          children: shelter.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: 12,\n            color: 'var(--color-text-muted)'\n          },\n          children: [shelter.distance, \" mi \\xB7 \", shelter.hours]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'flex-end',\n          gap: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(MatchBadge, {\n          score: score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            onBookmark();\n          },\n          style: {\n            background: 'none',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: 16,\n            color: isBookmarked ? 'var(--color-primary)' : 'var(--color-text-light)'\n          },\n          \"aria-label\": isBookmarked ? 'Remove bookmark' : 'Bookmark shelter',\n          children: isBookmarked ? 'üîñ' : 'üè∑Ô∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OccupancyBar, {\n      current: shelter.current,\n      capacity: shelter.capacity,\n      showLabel: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: 11,\n        color: 'var(--color-text-muted)',\n        marginTop: 4\n      },\n      children: getStatusLabel(shelter.current, shelter.capacity)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 4,\n        flexWrap: 'wrap',\n        marginTop: 8\n      },\n      children: [shelter.services.slice(0, 4).map(svc => /*#__PURE__*/_jsxDEV(Tag, {\n        style: {\n          fontSize: 10,\n          padding: '2px 6px'\n        },\n        children: svc\n      }, svc, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }, this)), shelter.services.length > 4 && /*#__PURE__*/_jsxDEV(Tag, {\n        style: {\n          fontSize: 10,\n          padding: '2px 6px'\n        },\n        children: [\"+\", shelter.services.length - 4]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n_c4 = ShelterCard;\nexport default MapView;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"FitBounds\");\n$RefreshReg$(_c2, \"MapFlyTo\");\n$RefreshReg$(_c3, \"MapView\");\n$RefreshReg$(_c4, \"ShelterCard\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","useMap","L","SHELTERS","FALLBACK_SHELTERS","shelterApi","getMatchScore","getStatusLabel","OccupancyBar","MatchBadge","Tag","ShelterProfileModal","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","FitBounds","shelters","skip","_s","map","hasFitted","current","length","bounds","latLngBounds","s","lat","lng","fitBounds","padding","_c","MapFlyTo","selectedShelter","_s2","flyTo","duration","_c2","MapView","user","prefs","bookmarks","onBookmark","_s3","setShelters","setSelectedShelter","searchQuery","setSearchQuery","filterService","setFilterService","hasSelectedOnce","setHasSelectedOnce","getAll","then","catch","ALL_SERVICES","filteredShelters","filter","matchesSearch","name","toLowerCase","includes","address","matchesFilter","services","sort","a","b","handleSelectShelter","shelter","style","display","height","overflow","children","width","flexShrink","overflowY","background","borderRight","flexDirection","borderBottom","className","type","placeholder","value","onChange","e","target","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","gap","flexWrap","svc","onClick","borderRadius","border","fontSize","fontWeight","cursor","color","transition","charAt","toUpperCase","slice","flex","textAlign","ShelterCard","isBookmarked","id","onSelect","position","center","zoom","attribution","url","eventHandlers","click","minWidth","alignItems","score","distance","capacity","showLabel","marginTop","href","rel","textDecoration","isOpen","onClose","onGetDirections","dest","encodeURIComponent","navigator","geolocation","getCurrentPosition","pos","origin","coords","latitude","longitude","window","open","_c3","onMouseEnter","currentTarget","onMouseLeave","justifyContent","marginRight","whiteSpace","textOverflow","hours","stopPropagation","_c4","$RefreshReg$"],"sources":["/Users/nikhiljangir/NutriLife/client/src/pages/MapView.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { SHELTERS as FALLBACK_SHELTERS } from '../data/shelters';\nimport { shelterApi } from '../utils/api';\nimport { getMatchScore } from '../utils/helpers';\nimport { getStatusLabel } from '../utils/statusHelpers';\nimport { OccupancyBar, MatchBadge, Tag } from '../components/shared';\nimport { ShelterProfileModal } from '../components/modals';\n\n// Fix for default marker icons in react-leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\n// Fit map bounds to show all markers (only on initial load)\nfunction FitBounds({ shelters, skip }) {\n  const map = useMap();\n  const hasFitted = useRef(false);\n\n  useEffect(() => {\n    if (skip || hasFitted.current || shelters.length === 0) return;\n    const bounds = L.latLngBounds(\n      shelters.map((s) => [s.lat, s.lng])\n    );\n    map.fitBounds(bounds, { padding: [50, 50] });\n    hasFitted.current = true;\n  }, [map, shelters, skip]);\n\n  return null;\n}\n\n// Fly map to selected shelter when user clicks a card, marker, or \"View details\"\nfunction MapFlyTo({ selectedShelter }) {\n  const map = useMap();\n  useEffect(() => {\n    if (selectedShelter && selectedShelter.lat != null && selectedShelter.lng != null) {\n      map.flyTo([selectedShelter.lat, selectedShelter.lng], 15, { duration: 0.5 });\n    }\n  }, [map, selectedShelter]);\n  return null;\n}\n\n/**\n * MapView ‚Äì interactive shelter map with sidebar list.\n * Uses react-leaflet when available; gracefully falls back to a list-only view.\n *\n * @param {object}      props\n * @param {object|null} props.user\n * @param {object}      props.prefs    - user preferences for match scoring\n * @param {number[]}    props.bookmarks\n * @param {Function}    props.onBookmark\n */\nfunction MapView({ user, prefs = {}, bookmarks = [], onBookmark }) {\n  const [shelters, setShelters] = useState(FALLBACK_SHELTERS);\n  const [selectedShelter, setSelectedShelter] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterService, setFilterService] = useState('all');\n  const [hasSelectedOnce, setHasSelectedOnce] = useState(false);\n\n  useEffect(() => {\n    shelterApi.getAll().then(setShelters).catch(() => {});\n  }, []);\n\n  const ALL_SERVICES = ['all', 'meals', 'beds', 'showers', 'medical', 'counseling', 'childcare'];\n\n  const filteredShelters = useMemo(() => {\n    return shelters.filter((s) => {\n      const matchesSearch =\n        s.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        s.address.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesFilter =\n        filterService === 'all' || s.services.includes(filterService);\n      return matchesSearch && matchesFilter;\n    }).sort((a, b) => getMatchScore(b, prefs) - getMatchScore(a, prefs));\n  }, [shelters, searchQuery, filterService, prefs]);\n\n  const handleSelectShelter = (shelter) => {\n    setSelectedShelter(shelter);\n    setHasSelectedOnce(true);\n  };\n\n  return (\n    <div style={{ display: 'flex', height: 'calc(100vh - 64px)', overflow: 'hidden' }}>\n      {/* Sidebar */}\n      <aside\n        style={{\n          width: 360,\n          flexShrink: 0,\n          overflowY: 'auto',\n          background: 'var(--color-surface)',\n          borderRight: '1px solid var(--color-border)',\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n        {/* Search & Filter */}\n        <div style={{ padding: 16, borderBottom: '1px solid var(--color-border)' }}>\n          <input\n            className=\"input\"\n            type=\"search\"\n            placeholder=\"üîç Search shelters‚Ä¶\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            style={{ marginBottom: 12 }}\n          />\n          <div style={{ display: 'flex', gap: 6, flexWrap: 'wrap' }}>\n            {ALL_SERVICES.map((svc) => (\n              <button\n                key={svc}\n                onClick={() => setFilterService(svc)}\n                style={{\n                  padding: '4px 10px',\n                  borderRadius: 'var(--radius-full)',\n                  border: 'none',\n                  fontSize: 12,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  background: filterService === svc ? 'var(--color-primary)' : 'var(--color-border)',\n                  color:      filterService === svc ? '#fff' : 'var(--color-text-muted)',\n                  transition: 'all var(--transition-fast)',\n                }}\n              >\n                {svc === 'all' ? 'All' : svc.charAt(0).toUpperCase() + svc.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Shelter List */}\n        <div style={{ flex: 1, overflowY: 'auto' }}>\n          {filteredShelters.length === 0 ? (\n            <div style={{ padding: 32, textAlign: 'center', color: 'var(--color-text-muted)' }}>\n              <div style={{ fontSize: 40, marginBottom: 8 }}>üîç</div>\n              <p>No shelters match your search.</p>\n            </div>\n          ) : (\n            filteredShelters.map((shelter) => (\n              <ShelterCard\n                key={shelter.id}\n                shelter={shelter}\n                prefs={prefs}\n                isBookmarked={bookmarks.includes(shelter.id)}\n                onSelect={() => handleSelectShelter(shelter)}\n                onBookmark={() => onBookmark?.(shelter.id)}\n              />\n            ))\n          )}\n        </div>\n      </aside>\n\n      {/* Map Area */}\n      <main style={{ flex: 1, position: 'relative' }}>\n        <MapContainer\n          center={[44.9778, -93.2650]} // Minneapolis, MN coordinates\n          zoom={12}\n          style={{ height: '100%', width: '100%' }}\n        >\n          <TileLayer\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          <FitBounds shelters={filteredShelters} skip={hasSelectedOnce} />\n          <MapFlyTo selectedShelter={selectedShelter} />\n          {filteredShelters.map((shelter) => (\n            <Marker\n              key={shelter.id}\n              position={[shelter.lat, shelter.lng]}\n              eventHandlers={{\n                click: () => handleSelectShelter(shelter),\n              }}\n            >\n              <Popup>\n                <div style={{ minWidth: 200 }}>\n                  <h4 style={{ fontSize: 14, fontWeight: 700, marginBottom: 4 }}>\n                    {shelter.name}\n                  </h4>\n                  <p style={{ fontSize: 12, color: '#666', marginBottom: 8 }}>\n                    {shelter.address}\n                  </p>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8 }}>\n                    <MatchBadge score={getMatchScore(shelter, prefs)} />\n                    <span style={{ fontSize: 11, color: '#999' }}>\n                      {shelter.distance} mi away\n                    </span>\n                  </div>\n                  <OccupancyBar \n                    current={shelter.current} \n                    capacity={shelter.capacity} \n                    showLabel={true} \n                  />\n                  <div style={{ display: 'flex', gap: 4, flexWrap: 'wrap', marginTop: 8 }}>\n                    {shelter.services.slice(0, 3).map((svc) => (\n                      <Tag key={svc} style={{ fontSize: 10, padding: '2px 6px' }}>{svc}</Tag>\n                    ))}\n                    {shelter.services.length > 3 && (\n                      <Tag style={{ fontSize: 10, padding: '2px 6px' }}>+{shelter.services.length - 3}</Tag>\n                    )}\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleSelectShelter(shelter)}\n                    style={{\n                      marginTop: 8,\n                      width: '100%',\n                      padding: '6px 12px',\n                      background: 'var(--color-primary)',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: 'var(--radius-md)',\n                      fontSize: 12,\n                      fontWeight: 600,\n                      cursor: 'pointer',\n                    }}\n                  >\n                    View Details\n                  </button>\n                  <a\n                    href={`https://www.google.com/maps/dir/?api=1&destination=${shelter.lat},${shelter.lng}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{\n                      display: 'block',\n                      marginTop: 6,\n                      fontSize: 12,\n                      color: 'var(--color-primary)',\n                      fontWeight: 600,\n                      textDecoration: 'none',\n                    }}\n                  >\n                    üß≠ Get directions\n                  </a>\n                </div>\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      </main>\n\n      {/* Shelter Profile Modal */}\n      <ShelterProfileModal\n        shelter={selectedShelter}\n        isOpen={!!selectedShelter}\n        onClose={() => setSelectedShelter(null)}\n        prefs={prefs}\n        isBookmarked={selectedShelter ? bookmarks.includes(selectedShelter.id) : false}\n        onBookmark={onBookmark}\n        onGetDirections={(s) => {\n          const dest = `${s.lat},${s.lng}`;\n          const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(dest)}`;\n          if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(\n              (pos) => {\n                const origin = `${pos.coords.latitude},${pos.coords.longitude}`;\n                window.open(`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(dest)}`, '_blank', 'noopener,noreferrer');\n              },\n              () => window.open(url, '_blank', 'noopener,noreferrer')\n            );\n          } else {\n            window.open(url, '_blank', 'noopener,noreferrer');\n          }\n        }}\n      />\n    </div>\n  );\n}\n\nfunction ShelterCard({ shelter, prefs, isBookmarked, onSelect, onBookmark }) {\n  const score = getMatchScore(shelter, prefs);\n\n  return (\n    <div\n      onClick={onSelect}\n      style={{\n        padding: '16px',\n        borderBottom: '1px solid var(--color-border)',\n        cursor: 'pointer',\n        transition: 'background var(--transition-fast)',\n      }}\n      onMouseEnter={(e) => (e.currentTarget.style.background = 'var(--color-bg)')}\n      onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\n    >\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: 8 }}>\n        <div style={{ flex: 1, minWidth: 0, marginRight: 8 }}>\n          <h4 style={{ fontSize: 14, fontWeight: 700, color: 'var(--color-text)', marginBottom: 2, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n            {shelter.name}\n          </h4>\n          <p style={{ fontSize: 12, color: 'var(--color-text-muted)' }}>{shelter.distance} mi ¬∑ {shelter.hours}</p>\n        </div>\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 4 }}>\n          <MatchBadge score={score} />\n          <button\n            onClick={(e) => { e.stopPropagation(); onBookmark(); }}\n            style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: 16, color: isBookmarked ? 'var(--color-primary)' : 'var(--color-text-light)' }}\n            aria-label={isBookmarked ? 'Remove bookmark' : 'Bookmark shelter'}\n          >\n            {isBookmarked ? 'üîñ' : 'üè∑Ô∏è'}\n          </button>\n        </div>\n      </div>\n      <OccupancyBar current={shelter.current} capacity={shelter.capacity} showLabel={false} />\n      <p style={{ fontSize: 11, color: 'var(--color-text-muted)', marginTop: 4 }}>\n        {getStatusLabel(shelter.current, shelter.capacity)}\n      </p>\n      <div style={{ display: 'flex', gap: 4, flexWrap: 'wrap', marginTop: 8 }}>\n        {shelter.services.slice(0, 4).map((svc) => (\n          <Tag key={svc} style={{ fontSize: 10, padding: '2px 6px' }}>{svc}</Tag>\n        ))}\n        {shelter.services.length > 4 && (\n          <Tag style={{ fontSize: 10, padding: '2px 6px' }}>+{shelter.services.length - 4}</Tag>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default MapView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}