{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\n/**\n * Generic fetch wrapper with JSON serialisation and error handling.\n *\n * @param {string} endpoint - relative API path (e.g. '/shelters')\n * @param {RequestInit} [options]\n * @returns {Promise<any>}\n */\nasync function request(endpoint, options = {}) {\n  const url = `${API_BASE}${endpoint}`;\n  const response = await fetch(url, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    },\n    ...options\n  });\n  if (!response.ok) {\n    const message = await response.text().catch(() => response.statusText);\n    throw new Error(`API error ${response.status}: ${message}`);\n  }\n  const text = await response.text();\n  return text ? JSON.parse(text) : null;\n}\n\n// ---------- Shelter endpoints ----------\n\nexport const shelterApi = {\n  getAll: () => request('/shelters'),\n  getById: id => request(`/shelters/${id}`),\n  search: query => request(`/shelters/search?q=${encodeURIComponent(query)}`),\n  checkIn: (id, data) => request(`/shelters/${id}/checkin`, {\n    method: 'POST',\n    body: JSON.stringify(data)\n  })\n};\n\n// ---------- User endpoints ----------\n\nexport const userApi = {\n  login: credentials => request('/auth/login', {\n    method: 'POST',\n    body: JSON.stringify(credentials)\n  }),\n  register: data => request('/auth/register', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  list: excludeId => request(excludeId ? `/users?exclude=${encodeURIComponent(excludeId)}` : '/users'),\n  getProfile: id => request(`/users/${id}`),\n  updateProfile: (id, data) => request(`/users/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(data)\n  }),\n  getBookmarks: id => request(`/users/${id}/bookmarks`),\n  addBookmark: (id, shId) => request(`/users/${id}/bookmarks`, {\n    method: 'POST',\n    body: JSON.stringify({\n      shelterId: shId\n    })\n  }),\n  removeBookmark: (id, shId) => request(`/users/${id}/bookmarks/${shId}`, {\n    method: 'DELETE'\n  })\n};\nexport const connectionApi = {\n  list: userId => request(`/connections?userId=${encodeURIComponent(userId)}`),\n  send: data => request('/connections', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  respond: (id, status) => request(`/connections/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      status\n    })\n  })\n};\n\n// ---------- Admin endpoints ----------\n\nexport const adminApi = {\n  getInventory: () => request('/admin/inventory'),\n  updateInventory: (id, data) => request(`/admin/inventory/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify(data)\n  }),\n  getDistributions: () => request('/admin/distributions'),\n  createDistribution: data => request('/admin/distributions', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  })\n};\n\n// ---------- Community endpoints ----------\n\nexport const communityApi = {\n  getMessages: () => request('/community'),\n  postMessage: data => request('/community', {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  likeMessage: id => request(`/community/${id}/like`, {\n    method: 'PATCH'\n  })\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","request","endpoint","options","url","response","fetch","headers","ok","message","text","catch","statusText","Error","status","JSON","parse","shelterApi","getAll","getById","id","search","query","encodeURIComponent","checkIn","data","method","body","stringify","userApi","login","credentials","register","list","excludeId","getProfile","updateProfile","getBookmarks","addBookmark","shId","shelterId","removeBookmark","connectionApi","userId","send","respond","adminApi","getInventory","updateInventory","getDistributions","createDistribution","communityApi","getMessages","postMessage","likeMessage"],"sources":["/Users/nikhiljangir/NutriLife/client/src/utils/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\n/**\n * Generic fetch wrapper with JSON serialisation and error handling.\n *\n * @param {string} endpoint - relative API path (e.g. '/shelters')\n * @param {RequestInit} [options]\n * @returns {Promise<any>}\n */\nasync function request(endpoint, options = {}) {\n  const url = `${API_BASE}${endpoint}`;\n\n  const response = await fetch(url, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n    ...options,\n  });\n\n  if (!response.ok) {\n    const message = await response.text().catch(() => response.statusText);\n    throw new Error(`API error ${response.status}: ${message}`);\n  }\n\n  const text = await response.text();\n  return text ? JSON.parse(text) : null;\n}\n\n// ---------- Shelter endpoints ----------\n\nexport const shelterApi = {\n  getAll: ()          => request('/shelters'),\n  getById: (id)       => request(`/shelters/${id}`),\n  search: (query)     => request(`/shelters/search?q=${encodeURIComponent(query)}`),\n  checkIn: (id, data) => request(`/shelters/${id}/checkin`, { method: 'POST', body: JSON.stringify(data) }),\n};\n\n// ---------- User endpoints ----------\n\nexport const userApi = {\n  login:          (credentials) => request('/auth/login',  { method: 'POST', body: JSON.stringify(credentials) }),\n  register:       (data)        => request('/auth/register', { method: 'POST', body: JSON.stringify(data) }),\n  list:           (excludeId)   => request(excludeId ? `/users?exclude=${encodeURIComponent(excludeId)}` : '/users'),\n  getProfile:     (id)          => request(`/users/${id}`),\n  updateProfile:  (id, data)    => request(`/users/${id}`, { method: 'PATCH', body: JSON.stringify(data) }),\n  getBookmarks:   (id)          => request(`/users/${id}/bookmarks`),\n  addBookmark:    (id, shId)    => request(`/users/${id}/bookmarks`, { method: 'POST', body: JSON.stringify({ shelterId: shId }) }),\n  removeBookmark: (id, shId)    => request(`/users/${id}/bookmarks/${shId}`, { method: 'DELETE' }),\n};\n\nexport const connectionApi = {\n  list:    (userId) => request(`/connections?userId=${encodeURIComponent(userId)}`),\n  send:    (data)   => request('/connections', { method: 'POST', body: JSON.stringify(data) }),\n  respond: (id, status) => request(`/connections/${id}`, { method: 'PATCH', body: JSON.stringify({ status }) }),\n};\n\n// ---------- Admin endpoints ----------\n\nexport const adminApi = {\n  getInventory:        ()         => request('/admin/inventory'),\n  updateInventory:     (id, data) => request(`/admin/inventory/${id}`, { method: 'PATCH', body: JSON.stringify(data) }),\n  getDistributions:    ()         => request('/admin/distributions'),\n  createDistribution: (data)      => request('/admin/distributions', { method: 'POST', body: JSON.stringify(data) }),\n};\n\n// ---------- Community endpoints ----------\n\nexport const communityApi = {\n  getMessages: () => request('/community'),\n  postMessage: (data) => request('/community', { method: 'POST', body: JSON.stringify(data) }),\n  likeMessage: (id)   => request(`/community/${id}/like`, { method: 'PATCH' }),\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}